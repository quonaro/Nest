# Nestfile Example
# This is a simple example configuration file for Nest.
# Copy this file to 'nestfile' in your project root and customize it.

# Simple command with positional arguments
greet(name: str, message: str):
    > desc: Greet someone with a message
    > script: |
        echo "Hello {{name}}, {{message}}!"

# Command with named arguments and defaults
build(!target|t: str = "x86_64", !release|r: bool = false):
    > desc: Build the project
    > script: |
        echo "Building for {{target}}"
        if [ "{{release}}" = "true" ]; then
            echo "Release mode enabled"
        else
            echo "Debug mode"
        fi

# Command with mixed positional and named arguments
copy(source: str, !destination|d: str, !overwrite|o: bool = false):
    > desc: Copy a file
    > script: |
        if [ "{{overwrite}}" = "true" ]; then
            echo "Copying {{source}} to {{destination}} (with overwrite)"
        else
            echo "Copying {{source}} to {{destination}}"
        fi

# Group command with subcommands
dev:
    > desc: Development tools

    default(!watch|w: bool = false):
        > desc: Start development server
        > script: |
            if [ "{{watch}}" = "true" ]; then
                echo "Starting dev server with watch mode"
            else
                echo "Starting dev server"
            fi

    lint(!fix|f: bool = false):
        > desc: Run linter
        > script: |
            if [ "{{fix}}" = "true" ]; then
                echo "Running linter with --fix"
            else
                echo "Running linter"
            fi

# Command with numeric and array parameters
deploy(version: str, !retries|r: num = 3, !tags|t: arr = []):
    > desc: Deploy application
        > script: |
        echo "Deploying version {{version}}"
        echo "Retries: {{retries}}"
        if [ -n "{{tags}}" ]; then
            echo "Tags: {{tags}}"
        else
            echo "No tags specified"
        fi

# Simple command with working directory
test():
    > desc: Run tests
    > cwd: .
        > script: |
        echo "Running tests in current directory"
